"use strict";$(function(){function t(t,e,a){$.ajax({url:"http://127.0.0.1:9090/api/getcategorybyid?timestamp="+(new Date).getTime(),data:{categoryid:e},success:function(e){e=e.result;var a="";a+='  <a href="index.html" class="list-title1">首页</a> >',a+='  <a href="category.html" class="list-title2">全部分类</a> >',a+='  <a href="#" class="list-title3" id="category">'+e[0].category+"</a> >",a+='  <a href="" class="select">筛选</a>',t.html(a)}})}function e(t,e,a,i){$.ajax({url:"http://127.0.0.1:9090/api/getproductlist?timestamp="+(new Date).getTime(),data:{categoryid:e,pageid:a},success:function(i){var r=Math.ceil(i.totalCount/i.pagesize);i=i.result;for(var s="<ul>",c=0;c<i.length;c++)s+="<li>",s+='<a href="bijia.html?productid='+i[c].productId+'">',s+='<div class="pic">',s+=i[c].productImg,s+="</div>",s+='<div class="info">',s+='<div class="tit">',s+=i[c].productName,s+="</div>",s+='<div class="price">',s+="<em>"+i[c].productPrice+"</em>",s+='<span class="star"><em class="star5"></em></span>',s+="</div>",s+='<div class="other">',s+="<em>"+i[c].productQuote+"</em>",s+="<em>"+i[c].productCom+"</em>",s+="</div>",s+="</div>",s+="</a>",s+="</li>";s+="</ul>",s+='<div class="clearfix page">',s+='<span class="w33"><a href="productlist.html?categoryid='+e+"&category="+$("#category").html()+"&pageid="+(a-1)+'">上一页</a></span>',s+='<span class="w33"><select id="selectPage" name="select"  selected style="border: 1px solid #bababa; font-size: 16px; padding: 8px 15px; height: 36px"">';for(var c=0;c<r;c++)s+=a==c+1?'<option value="'+Number(c+1)+'" selected>'+Number(c+1)+"/"+Number(r)+"</option>":'<option value="'+Number(c+1)+'">'+Number(c+1)+"/"+Number(r)+"</option>";s+="</select></span>",s+='<span class="w33"><a href="productlist.html?categoryid='+e+"&category="+$("#category").html()+"&pageid="+(Number(a)+1)+'" >下一页</a></span>',s+="</div>",t.html(s),$("#selectPage").on("change",function(t){window.location.href="productlist.html?categoryid="+$.getUrlParam("categoryid")+"&category="+$("#category").html()+"&pageid="+$(this).val(),$(this).attr("selected","selected")})}})}t($(".product-list-title"),$.getUrlParam("categoryid")),e($("#product-list > .product-list"),$.getUrlParam("categoryid"),$.getUrlParam("pageid"))}),function(t){t.getUrlParam=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!=a?unescape(a[2]):null}}(jQuery);